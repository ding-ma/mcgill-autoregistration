# McGill Minerva Automatic register
The goal of this project is to use a cloud service like AWS or GCP. 
Within them, we can create a cron job and make it run a certain amount of time a day.

## Dependencies
* Node.js with Puppeteer

## How To use
1. Modify the content of `example.json` to match yours. 
2. The CRN is a list of all CRN of the class you would like to register. Those can be found on VSB.
3. Rename `example.json` to `credentials.json`.

Couple notes:
* Each CRN must be within double quotes `"YOUR_CRN"`
* The `semester`field needs to follow this pattern: YYYYMM
* YYYY represents the academic year
* MM is the semester where Fall is 09, Winter is 01, Summer is 05.\
For example, if I want to register for fall 2020, I would write 202009.\

## How to host on a cloud Service
1. Create a Google Cloud Function with the `gcp.js` content. Use HTTP Trigger, 512mb of ram, function to execute is `handler`.
2. Use the following ``package.json`` for the cloud functions.
```
{
  "name": "mcgill-autoregistration",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1",
    "start": "index.handler"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "puppeteer": "^2.1.1"
  }
}
```
3. Modify the config JSON as needed in the script.
4. Once deployed, create Google Cloud Scheduler that calls the url generated by the function with a ``POST`` request. Recommended time is every 1h to not get banned from minerva, with this cron: `* 1 * * *`. \
Example of a GCP log:
![image](https://user-images.githubusercontent.com/43629633/77568368-e7bc8000-6e9e-11ea-94e1-d484b97ddf65.png)

## Upcoming features and todos
- [ ] Log files generated by local script.
- [ ] Make code more modular (Help needed!). 

## Feature request 
Create an issue and we will talk about it!
